"use strict";angular.module("angular.extras.number.directives").directive("keyboardNavigation",function(){function a(a,b){return angular.element("tr:eq("+a+") td:eq("+b+")")}return{restrict:"A",link:function(){function b(b,c){var d=a(b,c);if(d.length>0)return angular.element("td").index(d);for(var e=1;c>=e;e++)if(d=a(b,c-e),d.length>0)return angular.element("td").index(d)}function c(a,c){return b(a+1,c)}function d(a,c){return b(a-1,c)}function e(a){var b=angular.element("table td.active-cell"),e=b.index(),f=b.parent().index(),h=angular.element("table td").length,i=0;37===a.keyCode&&(i=g>0?g-1:g),38===a.keyCode&&(i=d(f,e)),39===a.keyCode&&(i=h-1>g?g+1:g),40===a.keyCode&&(i=c(f,e)),g=i||g}function f(){angular.element(".active-cell input").blur(),angular.element(".active-cell").removeClass("active-cell");var a=angular.element("table tr td").eq(g);a.addClass("active-cell"),a.find("input").focus()}var g=0;angular.element(document).keydown(function(a){[37,38,39,40].indexOf(a.keyCode)>-1&&(a.preventDefault(),e(a),f())}),angular.element(document).on("click","td",function(){g=angular.element(this).closest("table").find("td").index(this),f()})}}});